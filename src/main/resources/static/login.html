<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<h1>Login</h1>
<div id="input">
  <label for="usernameInput">Username:</label>
  <input id="usernameInput" name="username" type="text"><br>
  <br>
  <label for="passwordInput">Password:</label>
  <input id="passwordInput" name="password" type="text"><br>
  <br>
</div>
<div id="answer"></div>
<div id="sendButtonDiv">
  <input type="button" value="Login" onclick="clickLoginButton()"/><br>
</div>
<script type="text/javascript">
  function clickLoginButton() {
      const username = document.getElementById("usernameInput").value;
      sendData(username);
  }

  function sendData(username) {
    const rawResponse = fetch('/users?username='+username, {
      method: 'GET', headers: {
        'Accept': 'application/json'},})
            .then(res => res.json())
            .then(resp => {console.log(resp);
              return resp;
            })
            .then(responseData => {window.location.replace(`/users?id=` + responseData.userID)
            })

            .catch(error => {
              let answerDiv = document.getElementById('answer'); answerDiv.innerHTML = `Error: ${error}`;
            }) }
</script>
</body>
</html>